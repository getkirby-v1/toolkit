<!DOCTYPE html>
<!-- saved from url=(0033)http://getkirby.com/docs/database -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Kirby</title>


<meta name="description" content="Kirby is a super simple, designy PHP toolkit">
<meta name="keywords" content="php, toolkit, jquery, simple, design">
<meta name="author" content="Bastian Allgeier">
<meta http-equiv="imagetoolbar" content="no">

<link rel="shortcut icon" href="http://getkirby.com/favicon.ico">

<link rel="stylesheet" href="./database_files/styles.css" media="all" type="text/css">

<link rel="stylesheet" type="text/css" media="screen" href="./database_files/Flame.twilight.css"><script src="./database_files/Fuel.php.js" type="text/javascript"></script></head>

<body>

<div id="page">

  <div id="menu">
  
    <ul>
            <li><a href="http://getkirby.com/home">kirby</a></li>
            <li><a class="active" href="http://getkirby.com/docs">docs</a></li>
            <li><a href="http://getkirby.com/download">download</a></li>
            <li><a href="http://getkirby.com/plugins">plugins</a></li>
          </ul>
  
  </div>
  
  <div id="content" class="docs">
  <h1>Documentation</h1>


<ul id="docsmenu">
    <li><a href="http://getkirby.com/docs/array">array</a></li>
      <li><a href="http://getkirby.com/docs/browser">browser</a></li>
      <li><a href="http://getkirby.com/docs/config">config</a></li>
      <li><a href="http://getkirby.com/docs/content">content</a></li>
      <li><a href="http://getkirby.com/docs/cookie">cookie</a></li>
      <li><a href="http://getkirby.com/docs/core">core</a></li>
      <li><a class="active" href="./database_files/database.htm">database</a></li>
      <li><a href="http://getkirby.com/docs/dir">dir</a></li>
      <li><a href="http://getkirby.com/docs/file">file</a></li>
      <li><a href="http://getkirby.com/docs/globals">globals</a></li>
      <li><a href="http://getkirby.com/docs/helper">helper</a></li>
      <li><a href="http://getkirby.com/docs/language">language</a></li>
      <li><a href="http://getkirby.com/docs/request">request</a></li>
      <li><a href="http://getkirby.com/docs/server">server</a></li>
      <li><a href="http://getkirby.com/docs/session">session</a></li>
      <li><a href="http://getkirby.com/docs/size">size</a></li>
      <li><a href="http://getkirby.com/docs/string">string</a></li>
      <li><a href="http://getkirby.com/docs/url">url</a></li>
      <li><a href="http://getkirby.com/docs/validation">validation</a></li>
      <li><a href="http://getkirby.com/docs/xml">xml</a></li>
  </ul>

<div id="documentation">
<h2>DB (Database)</h2>

<p>Kirby makes the interaction with MySQL super simple. You don't have to worry about connections or other stuff. Simply setup your databse config and go for it.</p>

<h3>Setup the database connection</h3>

<p>The config class is used to setup the database connection details. It's beyond the scope of this documentation to explain how to setup a MySQL database, but believe me, it's easy :-)
You only have to do this once at the beginning of your code and it makes sense to put that stuff in an external config file and just include that each time.</p>

<h4>Example</h4>

<pre><code style="display: none; ">c::set('db.host', 'localhost');
c::set('db.user', 'root');
c::set('db.password', 'password');
c::set('db.name', 'database');
</code><pre class="twilightLighter"><span class="kw4">c</span>::<span class="me1">set</span><span class="br0">(</span><span class="st0">'db.host'</span>, <span class="st0">'localhost'</span><span class="br0">)</span>;
<span class="kw4">c</span>::<span class="me1">set</span><span class="br0">(</span><span class="st0">'db.user'</span>, <span class="st0">'root'</span><span class="br0">)</span>;
<span class="kw4">c</span>::<span class="me1">set</span><span class="br0">(</span><span class="st0">'db.password'</span>, <span class="st0">'password'</span><span class="br0">)</span>;
<span class="kw4">c</span>::<span class="me1">set</span><span class="br0">(</span><span class="st0">'db.name'</span>, <span class="st0">'database'</span><span class="br0">)</span>;</pre></pre>

<hr>

<h3>Function: db::select</h3>

<p>Select a bunch of rows from a table</p>

<h4>Syntax</h4>

<pre><code style="display: none; ">db::select('table', 'select_clause'[, 'where_clause'[, 'order_clause'[, 'page'[, 'limit']]]);
</code><pre class="twilightLighter"><span class="kw4">db</span>::<span class="me1">select</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'select_clause'</span><span class="br0">[</span>, <span class="st0">'where_clause'</span><span class="br0">[</span>, <span class="st0">'order_clause'</span><span class="br0">[</span>, <span class="st0">'page'</span><span class="br0">[</span>, <span class="st0">'limit'</span><span class="br0">]</span><span class="br0">]</span><span class="br0">]</span><span class="br0">)</span>;</pre></pre>

<h4>Arguments</h4>

<ol>
<li>table - (string) The table name</li>
<li>select_clause - (mixed) Can be either a select string: 'field1, field2' or an array: array('field1', 'field2')</li>
<li>where_clause - (mixed) Can be either a string: 'id = 1' or an array: array('id' =&gt; 1)</li>
<li>order_clause - (string) i.e. 'field1 ASC'</li>
<li>page - (int) </li>
<li>limit - (int)</li>
</ol>

<h4>Returns</h4>

<ul>
<li>(array) returns an array with all results</li>
</ul>

<h4>Example</h4>

<pre><code style="display: none; ">$users = db::select('users', '*');
// users is an array with all rows and all columns from the table 'users'


$posts = db::select('posts', 'id, title, body', array('user' =&gt; 1));
// posts is an array with all posts from user 1 and the specified columns


$comments = db::select('comments', '*', false, 'added DESC', 0,10);
// comments is an array with 10 comments sorted by comments_added
</code><pre class="twilightLighter"><span class="kw3">$users</span> = <span class="kw4">db</span>::<span class="me1">select</span><span class="br0">(</span><span class="st0">'users'</span>, <span class="st0">'*'</span><span class="br0">)</span>;<span class="co1">
// users is an array with all rows and all columns from the table 'users'</span>


<span class="kw3">$posts</span> = <span class="kw4">db</span>::<span class="me1">select</span><span class="br0">(</span><span class="st0">'posts'</span>, <span class="st0">'id, title, body'</span>, <span class="me1">array</span><span class="br0">(</span><span class="st0">'user'</span> =&gt; <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;<span class="co1">
// posts is an array with all posts from user 1 and the specified columns</span>


<span class="kw3">$comments</span> = <span class="kw4">db</span>::<span class="me1">select</span><span class="br0">(</span><span class="st0">'comments'</span>, <span class="st0">'*'</span>, <span class="kw4">false</span>, <span class="st0">'added DESC'</span>, <span class="nu0">0</span>,<span class="nu0">10</span><span class="br0">)</span>;<span class="co1">
// comments is an array with 10 comments sorted by comments_added</span></pre></pre>

<hr>

<h3>Function: db::row</h3>

<p>Select a single row of a table</p>

<h4>Syntax</h4>

<pre><code style="display: none; ">db::row('table', 'select_clause', 'where_clause'[, 'order_clause']);
</code><pre class="twilightLighter"><span class="kw4">db</span>::<span class="me1">row</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'select_clause'</span>, <span class="st0">'where_clause'</span><span class="br0">[</span>, <span class="st0">'order_clause'</span><span class="br0">]</span><span class="br0">)</span>;</pre></pre>

<h4>Arguments</h4>

<ol>
<li>table - (string) The table name</li>
<li>select_clause - (mixed) Can be either a select string: 'field1, field2' or an array: array('field1', 'field2')</li>
<li>where_clause - (mixed) Can be either a string: 'id = 1' or an array: array('id' =&gt; 1)</li>
<li>order_clause - (string) i.e. 'field1 ASC'</li>
</ol>

<h4>Returns</h4>

<ul>
<li>(array) returns an array with all selected fields from this row</li>
</ul>

<h4>Example</h4>

<pre><code style="display: none; ">$user = db::row('user', '*', array('id' =&gt; 1));
// sample result: array(
//    'id' =&gt; 1,
//    'username' =&gt; 'bastian',
//    'email' =&gt; 'mail@bastian-allgeier.de'
// );

$user = db::row('user', 'username', array('id' =&gt; 1));
// sample result: array(
//    'username' =&gt; 'bastian'
// );
</code><pre class="twilightLighter"><span class="kw3">$user</span> = <span class="kw4">db</span>::<span class="me1">row</span><span class="br0">(</span><span class="st0">'user'</span>, <span class="st0">'*'</span>, <span class="me1">array</span><span class="br0">(</span><span class="st0">'id'</span> =&gt; <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;<span class="co1">
// sample result: array(</span><span class="co1">
//    'id' =&gt; 1,</span><span class="co1">
//    'username' =&gt; 'bastian',</span><span class="co1">
//    'email' =&gt; 'mail@bastian-allgeier.de'</span><span class="co1">
// );</span>

<span class="kw3">$user</span> = <span class="kw4">db</span>::<span class="me1">row</span><span class="br0">(</span><span class="st0">'user'</span>, <span class="st0">'username'</span>, <span class="me1">array</span><span class="br0">(</span><span class="st0">'id'</span> =&gt; <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;<span class="co1">
// sample result: array(</span><span class="co1">
//    'username' =&gt; 'bastian'</span><span class="co1">
// );</span></pre></pre>

<hr>

<h3>Function: db::field</h3>

<p>Select a single field from a table</p>

<h4>Syntax</h4>

<pre><code style="display: none; ">db::field('table', 'fieldname', 'where_clause');
</code><pre class="twilightLighter"><span class="kw4">db</span>::<span class="me1">field</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'fieldname'</span>, <span class="st0">'where_clause'</span><span class="br0">)</span>;</pre></pre>

<h4>Arguments</h4>

<ol>
<li>table - (string) The table name</li>
<li>fieldname - (string) The name of the field you want to select</li>
<li>where_clause - (mixed) Can be either a string: 'id = 1' or an array: array('id' =&gt; 1)</li>
</ol>

<h4>Returns</h4>

<ul>
<li>(mixed) returns the value of that field</li>
</ul>

<h4>Example</h4>

<pre><code style="display: none; ">$username = db::field('user', 'username', array('id' =&gt; 1));
// sample result: bastian
</code><pre class="twilightLighter"><span class="kw3">$username</span> = <span class="kw4">db</span>::<span class="me1">field</span><span class="br0">(</span><span class="st0">'user'</span>, <span class="st0">'username'</span>, <span class="me1">array</span><span class="br0">(</span><span class="st0">'id'</span> =&gt; <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;<span class="co1">
// sample result: bastian</span></pre></pre>

<hr>

<h3>Function: db::insert</h3>

<p>Insert a new row into a table</p>

<h4>Syntax</h4>

<pre><code style="display: none; ">db::insert('table', 'data');
</code><pre class="twilightLighter"><span class="kw4">db</span>::<span class="me1">insert</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'data'</span><span class="br0">)</span>;</pre></pre>

<h4>Arguments</h4>

<ol>
<li>table - (string) The table name</li>
<li>data - (mixed) Can be either a string: 'id = 1, title = "test"' or and array: array('id' =&gt; 1, 'title' =&gt; 'test')</li>
</ol>

<h4>Returns</h4>

<ul>
<li>(mixed) returns the id of that new row or false if it failed</li>
</ul>

<h4>Example</h4>

<pre><code style="display: none; ">$id = db::insert('user', array('username' =&gt; 'peter', 'email' =&gt; 'peter@example.com'));
</code><pre class="twilightLighter"><span class="kw3">$id</span> = <span class="kw4">db</span>::<span class="me1">insert</span><span class="br0">(</span><span class="st0">'user'</span>, <span class="me1">array</span><span class="br0">(</span><span class="st0">'username'</span> =&gt; <span class="st0">'peter'</span>, <span class="st0">'email'</span> =&gt; <span class="st0">'peter@example.com'</span><span class="br0">)</span><span class="br0">)</span>;</pre></pre>

<hr>

<h3>Function: db::update</h3>

<p>Update an existing row</p>

<h4>Syntax</h4>

<pre><code style="display: none; ">db::update('table', 'data'[, where_clause]);
</code><pre class="twilightLighter"><span class="kw4">db</span>::<span class="me1">update</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'data'</span><span class="br0">[</span>, <span class="kw4">where_clause</span><span class="br0">]</span><span class="br0">)</span>;</pre></pre>

<h4>Arguments</h4>

<ol>
<li>table - (string) The table name</li>
<li>data - (mixed) Can be either a string: 'id = 1, title = "test"' or and array: array('id' =&gt; 1, 'title' =&gt; 'test')</li>
<li>where_clause - (mixed) Can be either a string: 'id = 1' or and array: array('id' =&gt; 1)</li>
</ol>

<h4>Returns</h4>

<ul>
<li>(boolean) returns true or false</li>
</ul>

<h4>Example</h4>

<pre><code style="display: none; ">db::update('user', array('username' =&gt; 'peter'), array('id' =&gt; 1));
// replaces the username of user 1 with peter    
</code><pre class="twilightLighter"><span class="kw4">db</span>::<span class="me1">update</span><span class="br0">(</span><span class="st0">'user'</span>, <span class="me1">array</span><span class="br0">(</span><span class="st0">'username'</span> =&gt; <span class="st0">'peter'</span><span class="br0">)</span>, <span class="me1">array</span><span class="br0">(</span><span class="st0">'id'</span> =&gt; <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;<span class="co1">
// replaces the username of user 1 with peter    </span></pre></pre>

<hr>

<h3>Function: db::delete</h3>

<p>Delete a row</p>

<h4>Syntax</h4>

<pre><code style="display: none; ">db::delete('table', 'where_clause');
</code><pre class="twilightLighter"><span class="kw4">db</span>::<span class="me1">delete</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'where_clause'</span><span class="br0">)</span>;</pre></pre>

<h4>Arguments</h4>

<ol>
<li>table - (string) The table name</li>
<li>where_clause - (mixed) Can be either a string: 'id = 1' or and array: array('id' =&gt; 1)</li>
</ol>

<h4>Returns</h4>

<ul>
<li>(boolean) returns true or false</li>
</ul>

<h4>Example</h4>

<pre><code style="display: none; ">db::delete('user', array('id' =&gt; 1));
// deletes the user with the id 1
</code><pre class="twilightLighter"><span class="kw4">db</span>::<span class="me1">delete</span><span class="br0">(</span><span class="st0">'user'</span>, <span class="me1">array</span><span class="br0">(</span><span class="st0">'id'</span> =&gt; <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;<span class="co1">
// deletes the user with the id 1</span></pre></pre>

<hr>

<h3>...and a lot more</h3>

<p>DB has a lot more nifty functions which I will write about some more later.</p>

<pre><code style="display: none; ">// select a column from a table    
db::column('table', 'column_name', 'where_clause', 'order_clause', 'page', 'limit');

// count entries
db::count('table', 'where_clause');

// the minimum value of a column
db::min('table', 'column', 'where_clause');

// the maximum value of a column
db::max('table', 'column', 'where_clause');

// the sum of a column
db::sum('table', 'column', 'where_clause');

// join tables
db::join('table1', 'table2', 'on_clause', 'select_clause', 'where_clause', 'order_clause', 'page', 'limit');

// left join tables
db::left_join('table1', 'table2', 'on_clause', 'select_clause', 'where_clause', 'order_clause', 'page', 'limit');

// execute a custom query
db::query('query');

// and even some more...
</code><pre class="twilightLighter"><span class="co1">// select a column from a table    </span>
<span class="kw4">db</span>::<span class="me1">column</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'column_name'</span>, <span class="st0">'where_clause'</span>, <span class="st0">'order_clause'</span>, <span class="st0">'page'</span>, <span class="st0">'limit'</span><span class="br0">)</span>;
<span class="co1">
// count entries</span>
<span class="kw4">db</span>::<span class="me1">count</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'where_clause'</span><span class="br0">)</span>;
<span class="co1">
// the minimum value of a column</span>
<span class="kw4">db</span>::<span class="me1">min</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'column'</span>, <span class="st0">'where_clause'</span><span class="br0">)</span>;
<span class="co1">
// the maximum value of a column</span>
<span class="kw4">db</span>::<span class="me1">max</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'column'</span>, <span class="st0">'where_clause'</span><span class="br0">)</span>;
<span class="co1">
// the sum of a column</span>
<span class="kw4">db</span>::<span class="me1">sum</span><span class="br0">(</span><span class="st0">'table'</span>, <span class="st0">'column'</span>, <span class="st0">'where_clause'</span><span class="br0">)</span>;
<span class="co1">
// join tables</span>
<span class="kw4">db</span>::<span class="me1">join</span><span class="br0">(</span><span class="st0">'table1'</span>, <span class="st0">'table2'</span>, <span class="st0">'on_clause'</span>, <span class="st0">'select_clause'</span>, <span class="st0">'where_clause'</span>, <span class="st0">'order_clause'</span>, <span class="st0">'page'</span>, <span class="st0">'limit'</span><span class="br0">)</span>;
<span class="co1">
// left join tables</span>
<span class="kw4">db</span>::<span class="me1">left_join</span><span class="br0">(</span><span class="st0">'table1'</span>, <span class="st0">'table2'</span>, <span class="st0">'on_clause'</span>, <span class="st0">'select_clause'</span>, <span class="st0">'where_clause'</span>, <span class="st0">'order_clause'</span>, <span class="st0">'page'</span>, <span class="st0">'limit'</span><span class="br0">)</span>;
<span class="co1">
// execute a custom query</span>
<span class="kw4">db</span>::<span class="me1">query</span><span class="br0">(</span><span class="st0">'query'</span><span class="br0">)</span>;
<span class="co1">
// and even some more...</span></pre></pre>
</div>  </div>

  <div id="footer">
    © 2010 –&nbsp;<a href="http://bastian-allgeier.de/">Bastian Allgeier</a>
    <ul>
      <li><a href="http://twitter.com/getkirby">Follow Kirby on Twitter</a></li>
    </ul>
  </div>

</div>

<script type="text/javascript" src="./database_files/mootools.js"></script>
<script type="text/javascript" src="./database_files/Lighter.js"></script>
<script type="text/javascript" src="./database_files/Fuel.js"></script>
<script type="text/javascript" src="./database_files/scripts.js"></script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./database_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-431401-11");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>